<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>API Doc</title>
</head>
<body>
    <nav>
        <h1>API Documentation</h1>
        <button id="theme-btn">Change Theme</button>
    </nav>
    <main>
        <div class="ctn-content">
            <h2>Table of Contents</h2>
            <ul>
                <li><a href="#base-url">Base URL</a></li>
                <li><a href="#api-auth">Authentication</a></li>
                <li><a href="#res-code">Response Status Codes</a></li>
                <li><a href="#routes">API Endpoint Reference</a></li>
                <li><a href="#data-note">Data Model & Technical Notes</a></li>
                <li><a href="#res-examp">Example Responses</a></li>
            </ul>
        </div>
        <div id="base-url">
            <h3>Base URL</h3>
            <div class="ctn-bu">
                <ul>
                    <li>http://[ip]:[port]/</li>
                    <li>http://[ip]:[port]/server/systems</li>
                    <li>http://[ip]:[port]/server/commands</li>
                    <li>http://[ip]:[port]/server/logs</li>
                </ul>
                <p><span>/</span> : Checks if the API is running (GET method).</p>
                <p><span>/server/systems</span> : Main route for retrieving system information (POST method). Append specific routes like /status, /os, <a href="#system">etc</a>.</p>
                <p><span>/server/commands</span> : Main route for executing server commands (POST method). Append specific routes like /shutdown, /restart, <a href="#command">etc</a>.</p>
                <p><span>/server/logs</span> : Main route for executing server logs (POST method). Append specific routes like /nginx/check-log-file, /nginx/read-log-file, <a href="#log">etc</a>.</p>
            </div>
        </div>
        <div id="api-auth">
            <h3>Authentication</h3>
            <div class="ctn-au">
                <p>This API using authorization api key in header</p>
                <p>Name : <span>API_KEY</span>. Assign your secret key to this header in every request.</p>
            </div>
        </div>
        <div id="res-code">
            <h3>Response Status Codes</h3>
            <div class="ctn-rc">
                <ul>
                    <li>200</li>
                    <li>401</li>
                    <li>403</li>
                    <li>404</li>
                    <li>500</li>
                </ul>
                <p><span>200</span> : Successful Request </p>
                <p><span>401</span> : Unauthorized: Invalid or Missing API Key</p>
                <p><span>403</span> : Forbidden: Service is disabled in service.conf</p>
                <p><span>404</span> : Not Found</p>
                <p><span>500</span> : Internal Server Error</p>
            </div>
        </div>
        <div id="routes">
            <h3>API Endpoint Reference</h3>
            <div class="ctn-r">
                <div id="command">
                    <h4>Routes Command</h4>
                    <ul>
                        <li>/shutdown</li>
                        <li>/restart</li>
                        <li>/restart-jellyfin</li>
                        <li>/status-jellyfin</li>
                        <li>/restart-nginx</li>
                        <li>/status-nginx</li>
                        <li>/status-cloudflared</li>
                        <li>/status-postgresql</li>
                    </ul>
                    <p>All these routes use the POST method, require the value to be set to True in service.conf, and require correct sudoers and service file configuration.</p>
                    <p><span>/shutdown</span> : Immediately requests server shutdown</p>
                    <p><span>/restart</span> : Immediately request server restart</p>
                    <p><span>/restart-jellyfin</span> : Request Restart jellyfin service instanly</p>
                    <p><span>/status-jellyfin</span> : Checks the status of the Jellyfin service</p>
                    <p><span>/restart-nginx</span> : Request Restart nginx service instanly</p>
                    <p><span>/status-nginx</span> : Checks the status of the Nginx service</p>
                    <p><span>/status-cloudflared</span> : Checks the status of the Cloudflared service</p>
                    <p><span>/status-postgresql</span> : Checks the status of the postgresql service</p>
                </div>
                <div id="system">
                    <h4>Routes System</h4>
                    <ul>
                        <li>/status</li>
                        <li>/cpu</li>
                        <li>/memory</li>
                        <li>/disk</li>
                        <li>/os</li>
                        <li>/network</li>
                    </ul>
                    <p>All this routes has method POST and need set the value to True in service.conf</p>
                    <p><span>/status</span> : Request status of system include os, memory, and disk info</p>
                    <p><span>/cpu</span> : Requests detailed CPU information (brand, cores, and other specifications).</p>
                    <p><span>/memory</span> : Requests detailed Memory information (size and other specifications)</p>
                    <p><span>/disk</span> : Requests detailed Disk information (vendor, type, and other specifications)</p>
                    <p><span>/os</span> : Request detailed os like platform, distro, and other</p>
                    <p><span>/network</span> : Request data network like interface name, speed transfer, and other</p>
                </div>
                <div id="log">
                    <h4>Routes Log</h4>
                    <ul>
                        <li>/nginx/check-log-file</li>
                        <li>/nginx/read-log-file</li>
                    </ul>
                    <p>All this routes has method POST and need set the value to True in service.conf</p>
                    <p><span>/nginx/check-log-file</span> : Request list nginx log file </p>
                    <p><span>/nginx/read-log-file</span> : Request read nginx log file</p>
                </div>
            </div>
        </div>
        <div id="data-note">
            <h3>Data Model & Technical Notes</h3>
            <div class="ctn-hn">
                <div class="si-lib">
                    <h4>Get Data</h4>
                    <p>This API uses the <span>systeminformation, util, and spawn execSync exec (child_process)</span> for retrieving system data.</p>
                    <p>Disk and RAM data have been converted to Gigabytes (GB). for data transfer using Mega Byte (MB)</p>
                </div>
                <div class="note">
                    <h4>Note</h4>
                    <p>In some cases, detailed memory information (e.g., brand/speed) may not be available due to DMI BIOS limitations.</p>
                </div>
            </div>
        </div>
        <div id="res-examp">
            <h3>Example Responses</h3>
            <div class="ctn-re">
                <p>http://[ip]:[port]/server/systems/status</p>
                <div class="res-exam">{
  "cpu_load": "0.02",
  "os_distro": "Ubuntu",
  "memory_usage": {
    "total": "7.68",
    "free": "6.44",
    "used": "1.25"
  },
  "disk_usage": [
    {
      "fs": "/dev/sda2",
      "used": "10.94",
      "free": "446.44",
      "size": "457.38"
    }
  ]
}
                </div>
                <p>http://[ip]:[port]/server/commands/status-nginx</p>
                <pre class="res-exam">{
  "success": true,
  "message": "Service status retrieved successfully.",
  "details": "● nginx.service - A high performance web server and a reverse proxy server     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: enabled)\n     Active: active (running) since Tue 2025-12-23 04:37:12 UTC; 9h ago\n       Docs: man:nginx(8)\n    Process: 1025 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)\n    Process: 1036 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)\n   Main PID: 1038 (nginx)\n      Tasks: 5 (limit: 9345)\n     Memory: 5.2M (peak: 5.5M)\n        CPU: 35ms\n     CGroup: /system.slice/nginx.service\n             ├─1038 \"nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\"\n             ├─1039 \"nginx: worker process\"\n             ├─1040 \"nginx: worker process\"\n             ├─1041 \"nginx: worker process\"\n             └─1042 \"nginx: worker process\"\n\nDec 23 04:37:11 ubuntu-server systemd[1]: Starting nginx.service - A high performance web server and a reverse proxy server...\nDec 23 04:37:12 ubuntu-server systemd[1]: Started nginx.service - A high performance web server and a reverse proxy server.\n",
  "service_name": "nginx"
}
                </pre>
                <p>http://[ip]:[port]/server/logs/nginx/check-log-file</p>
                <div class="res-exam">{
  "status": "success",
  "files": [
    "access.log.1",
    "error.log.1",
    "astro_access.log",
    "astro_error.log",
    "astro_access.log.1",
    "error.log",
    "access.log"
  ]
}
                </div>
            </div>
        </div>
    </main>
    <footer></footer>
</body>
</html>

<script>
    const body = document.body;
    const btn_theme = document.getElementById('theme-btn');
    const stored_theme = localStorage.getItem('theme');

    if (stored_theme === 'dark') {
        body.classList.add('dark');
    }

    btn_theme.addEventListener('click', () => {
        body.classList.toggle('dark');
        
        if (body.classList.contains('dark')) {
            localStorage.setItem('theme', 'dark');
        } else {
            localStorage.setItem('theme', 'light');
        }
    })
</script>